{
  "id": "873f2f0d-44cd-4f99-a982-c29c7f1dd698",
  "prevId": "1ef086bb-47b5-42e8-b927-89ef7ed77c81",
  "version": "5",
  "dialect": "pg",
  "tables": {
    "army": {
      "name": "army",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "village_id": {
          "name": "village_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "troop_type": {
          "name": "troop_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "count": {
          "name": "count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "army_village_id_villages_id_fk": {
          "name": "army_village_id_villages_id_fk",
          "tableFrom": "army",
          "tableTo": "villages",
          "columnsFrom": [
            "village_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "battles": {
      "name": "battles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "attacker_id": {
          "name": "attacker_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "defender_id": {
          "name": "defender_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "attacker_troops": {
          "name": "attacker_troops",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "destruction_percentage": {
          "name": "destruction_percentage",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "stars": {
          "name": "stars",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "loot_gold": {
          "name": "loot_gold",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "loot_elixir": {
          "name": "loot_elixir",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "battle_log": {
          "name": "battle_log",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'completed'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "battles_attacker_id_villages_id_fk": {
          "name": "battles_attacker_id_villages_id_fk",
          "tableFrom": "battles",
          "tableTo": "villages",
          "columnsFrom": [
            "attacker_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "battles_defender_id_villages_id_fk": {
          "name": "battles_defender_id_villages_id_fk",
          "tableFrom": "battles",
          "tableTo": "villages",
          "columnsFrom": [
            "defender_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "buildings": {
      "name": "buildings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "village_id": {
          "name": "village_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "level": {
          "name": "level",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "position_x": {
          "name": "position_x",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "position_y": {
          "name": "position_y",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "health": {
          "name": "health",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "max_health": {
          "name": "max_health",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "internal_gold": {
          "name": "internal_gold",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "internal_elixir": {
          "name": "internal_elixir",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "internal_gold_capacity": {
          "name": "internal_gold_capacity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "internal_elixir_capacity": {
          "name": "internal_elixir_capacity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_collected_at": {
          "name": "last_collected_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "buildings_village_id_villages_id_fk": {
          "name": "buildings_village_id_villages_id_fk",
          "tableFrom": "buildings",
          "tableTo": "villages",
          "columnsFrom": [
            "village_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "username": {
          "name": "username",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "password_hash": {
          "name": "password_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_username_unique": {
          "name": "users_username_unique",
          "nullsNotDistinct": false,
          "columns": [
            "username"
          ]
        },
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      }
    },
    "villages": {
      "name": "villages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "trophies": {
          "name": "trophies",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "villages_user_id_users_id_fk": {
          "name": "villages_user_id_users_id_fk",
          "tableFrom": "villages",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "villages_user_id_unique": {
          "name": "villages_user_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "user_id"
          ]
        }
      }
    },
    "resources": {
      "name": "resources",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "village_id": {
          "name": "village_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "gold": {
          "name": "gold",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 500
        },
        "elixir": {
          "name": "elixir",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 500
        },
        "last_collected_at": {
          "name": "last_collected_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "resources_village_id_villages_id_fk": {
          "name": "resources_village_id_villages_id_fk",
          "tableFrom": "resources",
          "tableTo": "villages",
          "columnsFrom": [
            "village_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "resources_village_id_unique": {
          "name": "resources_village_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "village_id"
          ]
        }
      }
    },
    "training_queue": {
      "name": "training_queue",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "village_id": {
          "name": "village_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "troop_type": {
          "name": "troop_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completes_at": {
          "name": "completes_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "cost": {
          "name": "cost",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "queue_position": {
          "name": "queue_position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "training_queue_village_id_villages_id_fk": {
          "name": "training_queue_village_id_villages_id_fk",
          "tableFrom": "training_queue",
          "tableTo": "villages",
          "columnsFrom": [
            "village_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    }
  },
  "enums": {},
  "schemas": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}